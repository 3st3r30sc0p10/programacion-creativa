{"version":3,"sources":["programa.js"],"names":["animacion","dimension","window","innerWidth","tileCountX","tileCountY","tileWidth","tileHeight","imageCount","video","document","getElementById","lienzo","ctx","getContext","btnNuevoVid","linksVideos","currentImage","grillaX","grillaY","urlParam","i","cargarVideo","onloadedmetadata","dibujarVideo","prepare_link","clearRect","width","height","length","src","map","valor","x1","y1","x2","y2","posX","posY","drawImage","nextTime","duration","currentTime","cancelAnimationFrame","requestAnimationFrame","onmousedown"],"mappings":";AAKA,IAsBIA,EAtBEC,EAAYC,OAAOC,WACnBC,EAAa,EACbC,EAAa,GACbC,EAAYL,EAAYG,EACxBG,EAAaN,EAAYI,EACzBG,EAAaJ,EAAaC,EAC5BI,EAAQC,SAASC,eAAe,SAE9BC,EAASF,SAASC,eAAe,UACjCE,EAAMD,EAAOE,WAAW,MACxBC,EAAcL,SAASC,eAAe,eACtCK,EAAc,CAClB,gEACA,gFACA,0EACA,iFACA,mFACA,iFACA,8EACA,4EAIEC,EAAe,EACfC,EAAU,EACVC,EAAU,EACVC,EAAWV,SAASC,eAAe,OACnCU,EAAI,EAMR,SAASC,IACPb,EAAMc,iBAAmB,WACvBC,KAUJ,SAASC,IACPZ,EAAIa,UAAU,EAAG,EAAGd,EAAOe,MAAOf,EAAOgB,QAErCP,GAAKL,EAAYa,QACnBpB,EAAMqB,IAAMd,EAAYK,GACxBJ,EAAe,EACfC,EAAU,EACVC,EAAU,EACVE,MAEAZ,EAAMqB,IAAM,4EACZT,EAAI,GAIR,SAASU,EAAIC,EAAOC,EAAIC,EAAIC,EAAIC,GACtB,OAACJ,EAAQC,IAAOG,EAAKD,IAAQD,EAAKD,GAAME,EAGlD,SAASX,IACHa,IAAAA,EAAO/B,EAAYY,EACnBoB,EAAO/B,EAAaY,EACxBV,EAAQC,SAASC,eAAe,SAChCE,EAAI0B,UAAU9B,EAAO4B,EAAMC,EAAMhC,EAAWC,GAItCiC,IAAAA,EAAWT,IAFjBd,EAEmC,EAAGT,EAAY,EAAGC,EAAMgC,UAE3DhC,EAAMiC,YAAcF,IACpBtB,GAEed,IACbc,EAAU,EACVC,KAIEF,GAAgBT,EAClBN,OAAOyC,qBAAqB3C,GAE5BA,EAAY4C,sBAAsBpB,GAzDtCZ,EAAOe,MAAQ1B,EACfW,EAAOgB,OAAS3B,EAShBc,EAAY8B,YAAc,WACxBpB,KAkDFH","file":"programa.97f2e65a.js","sourceRoot":"../src","sourcesContent":["/*\nAdaptación de código en p5 tomado de: http://www.generative-gestaltung.de/2/sketches/?01_P/P_4_2_2_01\nSe pueden pintar también los frames de un video alojado en un servidor escribiendo\nel enlace. \n*/\nconst dimension = window.innerWidth;\nconst tileCountX = 9;\nconst tileCountY = 12;\nconst tileWidth = dimension / tileCountX;\nconst tileHeight = dimension / tileCountY;\nconst imageCount = tileCountX * tileCountY;\nlet video = document.getElementById('video');\n\nconst lienzo = document.getElementById('lienzo');\nconst ctx = lienzo.getContext('2d');\nconst btnNuevoVid = document.getElementById('btnNuevoVid');\nconst linksVideos = [\n  'https://juancgonzalez.com/labmoviles/suenos/capa2/monstro.mp4',\n  'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/arboles_niebla.mp4',\n  'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/ti_punch.mp4',\n  'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/sombra_planta_1.mp4',\n  'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/lagarto_brillante.mp4',\n  'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/hierbas_blancas.mp4',\n  'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/arbol_fiesta.mp4',\n  'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/luz_avion.mp4',\n];\n\nlet animacion;\nlet currentImage = 0;\nlet grillaX = 0;\nlet grillaY = 0;\nlet urlParam = document.getElementById('url');\nlet i = 0;\n\nlienzo.width = dimension;\nlienzo.height = dimension;\n\n/* Espera a que el video cargue para dibujarlo */\nfunction cargarVideo() {\n  video.onloadedmetadata = () => {\n    dibujarVideo();\n  };\n}\n/* Botón para cargar un video nuevo desde una url */\nbtnNuevoVid.onmousedown = () => {\n  prepare_link();\n};\n\n/* Función que prepara el nuevo video borrando lo que había antes en el lienzo\ny asignando la nueva url como fuente del elemento \"video\" */\nfunction prepare_link() {\n  ctx.clearRect(0, 0, lienzo.width, lienzo.height);\n  //var urlParam = document.getElementById('url');\n  if (i <= linksVideos.length) {\n    video.src = linksVideos[i]; //urlParam.value;\n    currentImage = 0;\n    grillaX = 0;\n    grillaY = 0;\n    i++;\n  } else {\n    video.src = 'https://juancgonzalez.com/labmoviles/suenos/capa1/nuevos_f/baile_azul.mp4';\n    i = 0;\n  }\n}\n\nfunction map(valor, x1, y1, x2, y2) {\n  return ((valor - x1) * (y2 - x2)) / (y1 - x1) + x2;\n}\n\nfunction dibujarVideo() {\n  let posX = tileWidth * grillaX;\n  let posY = tileHeight * grillaY;\n  video = document.getElementById('video');\n  ctx.drawImage(video, posX, posY, tileWidth, tileHeight);\n\n  currentImage++;\n\n  const nextTime = map(currentImage, 0, imageCount, 0, video.duration);\n  //console.log('seek to: ' + video.currentTime);\n  video.currentTime = nextTime;\n  grillaX++;\n\n  if (grillaX >= tileCountX) {\n    grillaX = 0;\n    grillaY++;\n  }\n\n  //nueva posición en la grilla\n  if (currentImage >= imageCount) {\n    window.cancelAnimationFrame(animacion);\n  } else {\n    animacion = requestAnimationFrame(dibujarVideo);\n  }\n}\n\ncargarVideo();\n"]}